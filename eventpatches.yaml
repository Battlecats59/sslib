003-ItemGet:
  - name: Remove Goddess Sword Scene change
    type: flowpatch
    index: 462 # skip scene change after getting goddess sword
    patch:
      next: -1
  - name: Goddess Longsword Text
    type: textpatch
    index: 16
    text: "You got the \x0E\x00\x03\x02\x05Goddess Longsword\x0E\x00\x03\x02\uFFFF!"
  - name: Goddess Whitesword Text
    type: textpatch
    index: 12
    text: "You got the \x0E\x00\x03\x02\x05Goddess Whitesword\x0E\x00\x03\x02\uFFFF!"
  - name: Master Sword Text
    type: textpatch
    index: 17
    text: "You got the \x0E\x00\x03\x02\x05Master Sword\x0E\x00\x03\x02\uFFFF!"
  - name: True Master Sword Text
    type: textpatch
    index: 19
    text: "You got the \x0E\x00\x03\x02\x05True Master Sword\x0E\x00\x03\x02\uFFFF!"
  - name: Harp Text
    type: textpatch
    index: 21
    text: "You got the \x0E\x00\x03\x02\x05Goddess Harp\x0E\x00\x03\x02\uFFFF!"
  - name: Faroure's Courage Text
    type: textpatch
    index: 237
    text: "You learned \x0E\x00\x03\x02\x05Farore's Courage\x0E\x00\x03\x02\uFFFF!"
  - name: Nayru's Wisdom Text
    type: textpatch
    index: 238
    text: "You learned \x0E\x00\x03\x02\x05Nayru's Wisdom\x0E\x00\x03\x02\uFFFF!"
  - name: Din's Power Text
    type: textpatch
    index: 239
    text: "You learned \x0E\x00\x03\x02\x05Din's Power\x0E\x00\x03\x02\uFFFF!"
  - name: remove BotG Scene Change
    type: flowpatch
    index: 464
    patch:
      next: -1
  - name: get rid of Skyloft layer 8&9
    type: flowpatch
    index: 540 # before storyflag
    patch:
      next: -1 # after Storyflag
    # after the last tear is picked up, patch it so that the flag for the trial is set
  - name: to set faron trial storyflag
    type: flowpatch
    index: 401
    patch:
      next: set faron trial storyflag
  - name: set faron trial storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 919
      next: -1
      param3: 0
  - name: to set eldin trial storyflag
    type: flowpatch
    index: 441
    patch:
      next: set eldin trial storyflag
  - name: set eldin trial storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 920
      next: -1
      param3: 0
  - name: to set lanayru trial storyflag
    type: flowpatch
    index: 451
    patch:
      next: set lanayru trial storyflag
  - name: set lanayru trial storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 921
      next: -1
      param3: 0
  - name: to set skyloft trial storyflag
    type: flowpatch
    index: 446
    patch:
      next: set skyloft trial storyflag
  - name: set skyloft trial storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 922
      next: -1
      param3: 0
  - name: Go to Harp Storyflag
    type: flowpatch
    index: 71
    patch:
      next: Goddess Harp Storyflag
  - name: Goddess Harp Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 9
      next: -1
      param3: 0
008-Hint:
  # check for 3 storyflags: required dungeon 1 and 2, then gate of time storyflag, if all are preset, set 11 & 13 so that imp2 can be fought
  - name: Rando Dungeon check
    type: entryadd
    entry:
      name: "008_007"
      value: Rando Set Zone CS Flag
  - name: Rando Dungeon 1 check
    type: switchadd
    flow:
      subType: 6
      param2: 902 # Beat Required Dungeon 1
      param3: 3
    cases:
      - Rando Dungeon 2 check
      - -1
  - name: Rando Dungeon 2 check
    type: switchadd
    flow:
      subType: 6
      param2: 903 # Beat Required Dungeon 2
      param3: 3
    cases:
      - Rando GoT check
      - -1
  - name: Rando GoT check
    type: switchadd
    flow:
      subType: 6
      param2: 343 # Before Raising GoT
      param3: 3
    cases:
      - Rando Set Rails Storyflag
      - -1
  # checks were successfull, imp2 can be fought now!
  - name: Rando Set Rails Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 11 # make rails appear, originally AC
      next: Rando Set Dungeons Completed Storyflag
      param3: 0
  - name: Rando Set Dungeons Completed Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 13 # originally fire sanctuary
      next: -1
      param3: 0
  - name: Rando Set Zone CS Flag # activates the CS after dungeons, or does nothing, zone temp flag 3
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 3
      param2: 11
      next: Rando Dungeon 1 check
      param3: 4
105-Terry:
  - name: Beedle's Crystal # Can't reach that right now
    type: flowpatch
    index: 115
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
106-DrugStore:
  - name: Potion Lady Bottle
    type: flowpatch
    index: 59
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      next: 41 # end of Potion lady text
      param3: 9
      param4: 0
      param5: 0
108-ShinkanA:
  - name: Owlans Shield
    type: flowpatch
    index: 169
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      next: 173 # end of owlans text
      param3: 9
      param4: 0
      param5: 0
109-TakeGoron:
  - name: Peater's Crystal 1
    type: flowpatch
    index: 79
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Peater's Crystal 2
    type: flowpatch
    index: 92
    patch:
      next: 79
110-DivingGame:
  - name: Fun Fun Owner's Crystal
    type: flowpatch
    index: 60
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
115-Town2:
  - name: Parrow's Empty Bottle
    type: flowpatch
    index: 734
    patch:
      next: 735 # jump to give item
  - name: Parrow's Spores Bottle
    type: flowpatch
    index: 199
    patch:
      next: 747 # to item
  - name: Parrow's Crystal 1
    type: flowpatch
    index: 814
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Parrow's Crystal 2
    type: flowpatch
    index: 732
    patch:
      next: 814
  - name: Feldge's Crystal
    type: flowpatch
    index: 325
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Baby's Crystal
    type: flowpatch
    index: 125
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Orrielle's Crystal
    type: flowpatch
    index: 225
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Ghost's Crystal
    type: flowpatch
    index: 522
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Pipit's Crystal
    type: flowpatch
    index: 641
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Skip Clawshot Requirement for Rattle Delivery
    type: flowpatch
    index: 7
    patch:
      next: 8
117-Pumpkin:
  - name: Kina Crystal Quest
    type: flowpatch
    index: 93
    patch:
      type: switch
      subType: 6
      param2: 901 # new FS flag
      param3: 3
      param4: 2
      param5: 60
  - name: Kina's Crystal
    type: flowpatch
    index: 386
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: playing Harp with Kina 1
    type: flowpatch
    index: 434
    patch:
      type: switch
      subType: 6
      param2: 9 # Harp
      param3: 3
      param4: 2
      param5: 180
  - name: playing Harp with Kina 2
    type: flowpatch
    index: 80
    patch:
      type: switch
      subType: 6
      param2: 9 # Harp
      param3: 3
      param4: 2
      param5: 52
  - name: playing Harp with Kina 3
    type: flowpatch
    index: 579
    patch:
      type: switch
      subType: 6
      param2: 9 # Harp
      param3: 3
      param4: 2
118-Town3:
  - name: Wryna's Crystal
    type: flowpatch
    index: 144
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Sparrot's Crystal
    type: flowpatch
    index: 141
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Owlan's Crystal # can't be reached right now
    type: flowpatch
    index: 157
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
123-Town5:
  - name: Peatrice's Crystal
    type: flowpatch
    index: 316
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Pipit's Mom's Crystal
    type: flowpatch
    index: 186
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
150-Siren:
  - name: to unset trial storyflag
    type: flowpatch
    index: 38
    patch:
      next: 81
  - name: unset trial storyflag on failure
    type: flowadd
    index: 81
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 922
      next: -1
      param3: 1 # unset storyflag
200-Forest:
  - name: give slingshot directly
    type: flowpatch
    index: 595
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      next: -1 # elder talks after gotten sligshot
      param3: 9
      param4: 0
      param5: 0
201-ForestD1:
  - name: give item after beating skyview
    type: flowpatch
    index: 6
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: 87
      param3: 9
      param4: 0
      param5: 0
  - name: rando required dungeon storyflag
    type: flowpatch
    index: 87
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: -1 # will be filled in later if this is a required dungeon
      next: 81
      param3: 0
  - name: to rando dungeons completed check
    type: flowpatch
    index: 81
    patch:
      type: type3
      subType: 1
      param1: 8 # entrypoint 008_007
      param2: 7
      next: -1
      param3: 7
202-ForestD2:
  - name: Give item after AC
    type: entryadd
    entry:
      name: "202_31"
      value: After AC event start
  - name: After AC event start
    type: flowadd
    flow:
      type: start
      next: give item after beating ancient cistern
  - name: give item after beating ancient cistern
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: rando required dungeon storyflag
      param3: 9
  - name: rando required dungeon storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: -1 # will be filled in later if this is a required dungeon
      next: to rando dungeons completed check
      param3: 0
  - name: to rando dungeons completed check
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 8 # entrypoint 008_007
      param2: 7
      next: -1
      param3: 7
250-ForestSiren:
  - name: shorten fi text
    type: flowpatch
    index: 1
    patch:
      next: 78
  # unset trial storyflag on fail
  - name: to unset Trial storyflag
    type: flowpatch
    index: 37
    patch:
      next: unset Trial storyflag
  - name: unset Trial storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 919
      next: -1
      param3: 1 # unset storyflag
301-MountainD1:
  - name: give item after beating earth temple
    type: flowpatch
    index: 22
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: 20 # goes to beat ET story flag
      param3: 9
      param4: 0
      param5: 0
  - name: rando required dungeon storyflag
    type: flowpatch
    index: 21
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: -1 # will be filled in later if this is a required dungeon
      next: 59
      param3: 0
  - name: to rando dungeons completed check
    type: flowpatch
    index: 59
    patch:
      type: type3
      subType: 1
      param1: 8 # entrypoint 008_007
      param2: 7
      next: -1
      param3: 7
304-MountainD2:
  - name: Give item before CS
    type: flowpatch
    index: 5
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: 6
      param3: 9
      param4: 0
      param5: 0
  - name: rando required dungeon storyflag
    type: flowpatch
    index: 6
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: -1 # will be filled in later if this is a required dungeon
      next: 94
      param3: 0
  - name: to rando dungeons completed check
    type: flowpatch
    index: 94
    patch:
      type: type3
      subType: 1
      param1: 8 # entrypoint 008_007
      param2: 7
      next: -1
      param3: 7
350-MountainSairen:
  - name: to unset trial storyflag
    type: flowpatch
    index: 30
    patch:
      next: unset trial storyflag on failure
  - name: unset trial storyflag on failure
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 920
      next: -1
      param3: 1 # unset storyflag
400-Desert:
  - name: give item after harp CS
    type: flowpatch
    index: 286
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      next: 287 # end
      param3: 9
      param4: 0
      param5: 0
  - name: rando required dungeon storyflag
    type: flowpatch
    index: 287
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: -1 # will be filled in later if this is a required dungeon
      next: 288
      param3: 0
  - name: to rando dungeons completed check
    type: flowpatch
    index: 288
    patch:
      type: type3
      subType: 1
      param1: 8 # entrypoint 008_007
      param2: 7
      next: -1
      param3: 7
  - name: Fix Hook Beetle check # the robot doesn't give the item after harp
    type: flowpatch
    index: 39
    patch:
      next: 5
401-DesertD2:
  - name: give item after beating sandship
    type: flowpatch
    index: 45
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: 46
      param3: 9
      param4: 0
      param5: 0
  - name: rando required dungeon storyflag
    type: flowpatch
    index: 46
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: -1 # will be filled in later if this is a required dungeon
      next: to rando dungeons completed check
      param3: 0
  - name: to rando dungeons completed check
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 8 # entrypoint 008_007
      param2: 7
      next: -1
      param3: 7
450-DesertSiren:
  - name: to unset trial storyflag
    type: flowpatch
    index: 30
    patch:
      next: unset trial storyflag on failure
  - name: unset trial storyflag on failure
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 921
      next: -1
      param3: 1 # unset storyflag
502-CenterFieldBack:
  - name: Zelda's Cutscene, give item from impa # this is overriding a set sceneflag, which is not needed anymore
    type: flowpatch
    index: 17
    patch:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: 16
      param3: 9
      param4: 0
      param5: 0
  - name: Zelda's Cutscene, trigger CS # auto trigger CS, so above mentioned sceneflag is useless
    type: flowpatch
    index: 16
    patch:
      type: type3
      subType: 1
      param1: 2 # trigger exit 2
      param2: 2 # room 2
      next: -1
      param3: 10
